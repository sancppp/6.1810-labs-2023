# lab7
> https://www.cnblogs.com/weijunji/p/xv6-study-8.html

写驱动drivers

驱动程序分为top、bottom。
- top：运行内核线程，
- bottom：中断处理
“许多设备驱动程序在两个上下文中执行代码：上半部分在进程的内核线程中运行，下半部分在中断时执行。上半部分通过系统调用（如读取和写入）调用，要求设备执行 I/O。这些代码可能会要求硬件启动一项操作（例如，要求磁盘读取一个数据块），然后代码等待操作完成。最终，设备完成操作并引发中断。驱动程序的中断处理程序作为下半部分，会找出已完成的操作，酌情唤醒等待进程，并通知硬件开始执行任何等待的下一个操作。”

syscall -> top，执行设备IO，等待设备完成 -> 设备完成之后产生中断，由bottom处理。
bottom是中断处理函数。

开发驱动需要熟悉手册！！！


answer:https://ttzytt.com/2022/08/xv6_lab8_record/index.html